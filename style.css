body{
    margin:0;
    font-family: Inter, "Segoe UI", Roboto, sans-serif;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px;
    color:#13320f;
  }

  .app {
    width:980px;
    max-width:96%;
    display:grid;
    grid-template-columns: 420px 1fr;
    gap:24px;
    align-items:start;
  }

  .card {
    background:var(--card);
    padding:18px;
    border-radius:14px;
    box-shadow: 0 6px 18px rgba(16,32,16,0.08);
  }

  /* Left: Controls */
  .controls h2 { margin:0 0 8px 0; }
  .controls p { margin:0 0 12px 0; color:#1b4b2b; opacity:.9 }
  .button {
    display:inline-block;
    padding:10px 16px;
    background:linear-gradient(90deg,#66bb6a,#2e7d32);
    color:white;
    border-radius:10px;
    font-weight:600;
    cursor:pointer;
    border:none;
    box-shadow:0 6px 12px rgba(46,125,50,0.2);
    transition: transform .12s ease, box-shadow .12s;
  }
  .button:hover { transform: translateY(-3px); box-shadow:0 10px 22px rgba(46,125,50,0.22); }
  .muted { color:#2e7d3266; font-size:.95rem; margin-top:8px; }

  .stats {
    margin-top:14px;
    display:flex;
    gap:12px;
    flex-wrap:wrap;
  }
  .stat {
    background: #ffffffee;
    padding:10px 12px;
    border-radius:10px;
    min-width:120px;
  }
  .stat b { display:block; font-size:1.3rem; }
  .small { font-size:.88rem; color:#23502b; opacity:.9; }

  /* Right: Tree */
  .tree-wrap{
    height:580px;
    position:relative;
    overflow:hidden;
  }
  .ground {
    position:absolute; left:0; right:0; bottom:0; height:120px;
    background: linear-gradient(180deg,#b7e0b2,#8fcf8c);
    border-top-left-radius:60% 30px;
    border-top-right-radius:60% 30px;
    display:flex;
    align-items:flex-end;
    justify-content:center;
    padding-bottom:18px;
  }

  .tree {
    position:relative;
    width:260px;
    height:420px;
    display:flex;
    align-items:flex-end;
    justify-content:center;
  }

  /* trunk */
  .trunk {
    width:56px;
    height:260px;
    background:linear-gradient(180deg,#6b3f1a,#5b2f14);
    border-radius:28px;
    position:relative;
    box-shadow: inset 0 8px 24px rgba(0,0,0,0.08);
  }

  /* branches - decorative */
  .branch {
    position:absolute;
    width:16px;
    height:120px;
    background:linear-gradient(180deg,#6b3f1a,#5b2f14);
    border-radius:12px;
    transform-origin: bottom center;
  }
  .branch.b1 { left:-36px; bottom:160px; transform: rotate(-28deg); height:120px; }
  .branch.b2 { right:-36px; bottom:200px; transform: rotate(28deg); height:100px; }
  .branch.b3 { left:-18px; bottom:100px; transform: rotate(-14deg); height:90px; }
  .branch.b4 { right:-18px; bottom:70px; transform: rotate(14deg); height:70px; }

  /* Leaves */
  .leaf {
    position:absolute;
    width:40px;
    height:26px;
    background:var(--leaf);
    border-radius:50% 60% 60% 50% / 60% 40% 60% 40%;
    transform-origin: left center;
    box-shadow: 0 3px 10px rgba(0,0,0,0.12);
    opacity:0;
    transform: translateY(20px) scale(0.6) rotate(-10deg);
    transition: transform .7s cubic-bezier(.2,.9,.3,1), opacity .7s;
  }

  .leaf.grown {
    opacity:1;
    transform: translateY(0) scale(1) rotate(0deg);
  }

  /* alternate leaf color */
  .leaf.alt {
    background:var(--leaf2);
  }

  /* flower */
  .flower {
    position:absolute;
    width:28px;
    height:28px;
    border-radius:50%;
    background:var(--flower);
    box-shadow: 0 4px 14px rgba(255,138,128,0.15);
    opacity:0;
    transform: scale(0.3);
    transition: transform .6s cubic-bezier(.2,.9,.3,1), opacity .6s;
  }
  .flower.bloom {
    opacity:1;
    transform: scale(1);
  }

  /* falling leaf animation */
  .fall {
    animation: leafFall 2.2s ease forwards;
  }
  @keyframes leafFall {
    0% { transform: translateY(0) rotate(0deg); opacity:1; }
    30% { transform: translateY(40px) rotate(20deg); opacity:1; }
    100% { transform: translateY(220px) rotate(180deg); opacity:0; }
  }

  /* small UI */
  .controls .small-input {
    margin-top:12px;
    display:flex;
    gap:8px;
    align-items:center;
  }
  input[type="number"]{
    width:88px;
    padding:8px;
    border-radius:8px;
    border:1px solid #dfeadf;
    outline:none;
  }

  .footer-note { margin-top:14px; color:#276127; opacity:.9; font-size:.92rem }
  @media (max-width:880px){
    .app{ grid-template-columns:1fr; }
    .tree-wrap{ height:480px; }
  }
</style>
</head>
<body>
  <div class="app">
    <div class="card controls">
      <h2>ðŸŒ± Habit Tree</h2>
      <p>Mark your habit complete each day to grow your tree â€” miss days and the tree loses leaves.</p>

      <div style="display:flex;gap:12px;align-items:center;margin-top:10px;">
        <button class="button" id="completeBtn">Mark Complete Today</button>
        <button class="button" id="undoBtn" style="background:linear-gradient(90deg,#ff8a80,#ff6b6b); box-shadow:0 6px 14px rgba(255,90,90,0.18)">Undo Last</button>
      </div>

      <div class="stats">
        <div class="stat"><b id="leavesCount">0</b><span class="small">Leaves</span></div>
        <div class="stat"><b id="streakCount">0</b><span class="small">Current Streak</span></div>
        <div class="stat"><b id="lastDate">â€”</b><span class="small">Last Completed</span></div>
      </div>

      <div class="muted">Flower milestone: every <strong id="flowerEvery">7</strong> leaves â†’ a flower!</div>

      <div class="small-input">
        <label class="small">Flower every</label>
        <input type="number" id="flowerInput" min="1" value="7">
      </div>

      <div class="footer-note">Tip: The tree uses local storage â€” it's saved on this browser.</div>
    </div>

    <div class="card tree-wrap">
      <div class="tree" id="treeArea">
        <div class="trunk" id="trunk">
          <div class="branch b1"></div>
          <div class="branch b2"></div>
          <div class="branch b3"></div>
          <div class="branch b4"></div>
          <!-- Leaves/flowers will be injected here -->
        </div>
      </div>

      <div class="ground"></div>
    </div>
  </div>
